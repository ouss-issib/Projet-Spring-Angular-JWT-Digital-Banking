<div class="container mt-4">
  <div *ngIf="accountHistory as history">
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title mb-3">Account Summary</h5>
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><strong>Account ID:</strong> {{ history.accountId }}</li>
              <li class="list-group-item"><strong>Balance:</strong> {{ history.balance | currency }}</li>
              <li class="list-group-item"><strong>Current Page:</strong> {{ history.currentPage + 1 }} / {{ history.totalPages }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <h4 class="mb-3">Operations</h4>
    <table class="table table-bordered table-hover align-middle" *ngIf="history.accountOperations.length > 0">
      <thead class="table-dark">
        <tr>
          <th>Date</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let op of history.accountOperations">
          <td>{{ op.date | date:'short' }}</td>
          <td>
            <span [ngClass]="{
              'badge bg-success': op.operationType === 'CREDIT',
              'badge bg-danger': op.operationType === 'DEBIT'
            }">
              {{ op.operationType }}
            </span>
          </td>
          <td [ngClass]="{'text-success': op.operationType === 'CREDIT', 'text-danger': op.operationType === 'DEBIT'}">
            {{ op.amount | currency }}
          </td>
          <td>{{ op.description }}</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="history.accountOperations.length === 0" class="alert alert-info">
      No operations found for this account.
    </div>

    <!-- Pagination Controls -->
    <nav *ngIf="history.totalPages > 1">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="history.currentPage === 0">
          <button class="page-link" (click)="loadPage(history.currentPage - 1)">Previous</button>
        </li>
        <li class="page-item"
            *ngFor="let p of [].constructor(history.totalPages); let i = index"
            [class.active]="i === history.currentPage">
          <button class="page-link" (click)="loadPage(i)">{{ i + 1 }}</button>
        </li>
        <li class="page-item" [class.disabled]="history.currentPage === history.totalPages - 1">
          <button class="page-link" (click)="loadPage(history.currentPage + 1)">Next</button>
        </li>
      </ul>
    </nav>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
</div>
